{% extends 'base.html' %}
{% block 'content' %}
    <style>
    table {
        border-collapse: collapse;
         width: 100%;
    }

    th, td {
          text-align: left;
          padding: 8px;
    }

    tr:nth-child(even){
        background-color: #f2f2f2
    }

    th {
        background-color: #4CAF50;
        color: white;
    }
    </style>
    <div class="table-responsive">
    {% if emprestimos %}
      <table class="table table-hover">
            <tr>
                <th >Nome</th>
                <th >Item</th>
                <th >Quantidade</th>
                <th >Data Pedido</th>
                <th >Ação</th>
                <th >Ação</th>
                <th >Ação</th>
            </tr>

          {% for emprestimo in emprestimos %}
              {% if emprestimo.tipo_id == 1 %}
              <tr>
                    <td> <a href="{% url 'exibe_um_usuario' emprestimo.solicitante.id %}"> {{emprestimo.solicitante.user.first_name }} {{emprestimo.solicitante.user.last_name}} </a> </td>
                    <td>{{emprestimo.equipamento.nome}}</td>
                    <td>{{emprestimo.quantidade}}</td>
                    <td>{{emprestimo.data_emprestimo}}</td>
                  <td> <a class="btn btn-sm btn-primary" href="{% url 'exibir_detalhes_solicitacao' emprestimo.id %}" >Visualizar</a></td>
                  <td> <a class="btn btn-sm btn-primary" href="{% url 'aceita_solicitacao' emprestimo.id %}" >Aceitar</a></td>
                  <td> <a class="btn btn-sm btn-danger" href="{% url 'rejeita_solicitacao' emprestimo.id %}" >Rejeitar</a></td>



            </tr>
              {% endif %}
            {%endfor%}
      </table>
    {% else %}
        <p style="font-size: 30px; font-weight: bold; text-align:center">Sem solicitações <br> :( </p>
    {% endif %}
  </div>


{% if emprestimos.paginator.count > 8 %}
  <ul class="pagination" style="padding-bottom: -5px; margin-bottom: 0">
    {% if emprestimos.has_previous %}
      <li class="page-item">
        <a class="page-link" href="?page={{ emprestimos.previous_page_number }}" tabindex="-1"> Anterior</a>
      </li>
    {% endif %}

    {% for num in emprestimos.paginator.page_range %}
      {% if emprestimos.number == num %}
        <li class="page-item active">
          <a class="page-link" href="#">{{ num }} <span class="sr-only">(current)</span></a>
        </li>
        {% elif num > emprestimos.number|add:'-3' and num < emprestimos.number|add:3 %}
          <li class="page-item"><a class="page-link" href="?page={{ num }}">{{ num }}</a></li>
        {% endif %}
      {% endfor %}

      {% if emprestimos.has_next %}
        <li class="page-item">
          <a class="page-link" href="?page={{ emprestimos.next_page_number }}">Próximo</a>
        </li>
      {% endif %}
  </ul>
{% endif %}

















<script>
$(document).ready(function(){
  $("#myBtn").click(function(){
    $('.toast').toast('show');
  });
});
</script>


{% endblock %}